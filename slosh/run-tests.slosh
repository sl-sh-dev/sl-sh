#!/usr/bin/env slosh

(let (globals (get-globals-sorted)
      globals-len (len globals)
      i 0)
    (load "init.slosh")
    (while (< i globals-len)
        (prn "Symbol: " globals.~i)
        (prn "===")
        (def doc (doc-map globals.~i))
        (prn "Usage: " (str doc.:usage))
        (prn "Description: " (str  doc.:description))
        (prn "Section: " (str doc.:section))
        (let (example (str doc.:example)
              read-in (read example))
            (prn "Example: " example)
            (dotimes-i j (len read-in)
                (let (line (prn (str read-in.~j))
                    evaled (eval read-in.~j))
                    ;; TODO PC need to exit if something fails!
                    (prn "Result: " (str evaled)))))
        (prn "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")
        (inc! i)))
